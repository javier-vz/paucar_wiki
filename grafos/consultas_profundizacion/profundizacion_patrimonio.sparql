
# Profundización de dimensión Patrimonio
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?nodoOrigen ?propiedad ?nodoDestino ?nodoOrigenLabel ?nodoDestinoLabel ?propiedadLabel
WHERE {
  VALUES ?propiedad { wdt:P1435 wdt:P6104 wdt:P2184 wdt:P8415 }
  
  ?nodoOrigen ?propiedad ?nodoDestino.
  
  # Filtros de calidad
  FILTER(STRSTARTS(STR(?nodoOrigen), "http://www.wikidata.org/entity/Q"))
  FILTER(STRSTARTS(STR(?nodoDestino), "http://www.wikidata.org/entity/Q"))
  FILTER(?nodoDestino != ?nodoOrigen)
  
  # Labels en español
  OPTIONAL { ?nodoOrigen rdfs:label ?nodoOrigenLabel. FILTER(LANG(?nodoOrigenLabel) = "es") }
  OPTIONAL { ?nodoDestino rdfs:label ?nodoDestinoLabel. FILTER(LANG(?nodoDestinoLabel) = "es") }
  OPTIONAL { ?propiedad rdfs:label ?propiedadLabel. FILTER(LANG(?propiedadLabel) = "es") }
}
LIMIT 300
