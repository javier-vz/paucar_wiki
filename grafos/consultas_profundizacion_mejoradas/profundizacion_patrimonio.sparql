
# Profundización ESPECÍFICA de dimensión Patrimonio
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT DISTINCT ?nodoOrigen ?propiedad ?nodoDestino ?nodoOrigenLabel ?nodoDestinoLabel ?propiedadLabel
WHERE {
  VALUES ?nodoOrigen { wd:Q112898263 }
  VALUES ?propiedad { wdt:P1435 wdt:P2184 }
  
  ?nodoOrigen ?propiedad ?nodoDestino.
  
  # FILTROS ESTRICTOS de calidad
  FILTER(STRSTARTS(STR(?nodoDestino), "http://www.wikidata.org/entity/Q"))
  FILTER(?nodoDestino != ?nodoOrigen)
  FILTER(!CONTAINS(STR(?nodoDestino), "statement"))
  FILTER(!CONTAINS(STR(?nodoDestino), "reference"))
  FILTER(!CONTAINS(STR(?nodoDestino), "ontology"))
  
  # Excluir nodos demasiado genéricos
  FILTER(!STRSTARTS(STR(?nodoDestino), "http://www.wikidata.org/entity/Q1"))
  FILTER(!STRSTARTS(STR(?nodoDestino), "http://www.wikidata.org/entity/Q2"))
  FILTER(!STRSTARTS(STR(?nodoDestino), "http://www.wikidata.org/entity/Q3"))
  FILTER(!STRSTARTS(STR(?nodoDestino), "http://www.wikidata.org/entity/Q4"))
  FILTER(!STRSTARTS(STR(?nodoDestino), "http://www.wikidata.org/entity/Q5"))
  
  # Labels en español
  OPTIONAL { ?nodoOrigen rdfs:label ?nodoOrigenLabel. FILTER(LANG(?nodoOrigenLabel) = "es") }
  OPTIONAL { ?nodoDestino rdfs:label ?nodoDestinoLabel. FILTER(LANG(?nodoDestinoLabel) = "es") }
  OPTIONAL { ?propiedad rdfs:label ?propiedadLabel. FILTER(LANG(?propiedadLabel) = "es") }
}
LIMIT 200
